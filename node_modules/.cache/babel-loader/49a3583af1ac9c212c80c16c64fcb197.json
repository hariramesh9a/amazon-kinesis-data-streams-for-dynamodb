{"ast":null,"code":"import _regeneratorRuntime from\"/Users/goesamee/Documents/Work/GSI/External Content/DynamoDB_Streaming_Blog/BlogTemplate/ddb-streaming-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/goesamee/Documents/Work/GSI/External Content/DynamoDB_Streaming_Blog/BlogTemplate/ddb-streaming-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/goesamee/Documents/Work/GSI/External Content/DynamoDB_Streaming_Blog/BlogTemplate/ddb-streaming-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useForm}from\"react-hook-form\";import'./App.css';import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";// import { library } from \"@fortawesome/fontawesome-svg-core\";\nimport{faSync,faSave}from\"@fortawesome/free-solid-svg-icons\";import Amplify,{API}from'aws-amplify';import{withAuthenticator,AmplifySignOut}from'@aws-amplify/ui-react';import awsconfig from'./aws-exports';import*as mutations from'./graphql/mutations';import*as queries from'./graphql/queries';import ddblogo from'./images/Amazon-DynamoDB_lgt.png';import toast from\"light-toast\";import{yupResolver}from'@hookform/resolvers/yup';import*as yup from\"yup\";import{ResponsiveContainer,Tooltip,XAxis,YAxis,CartesianGrid,LineChart,Line}from'recharts';Amplify.configure(awsconfig);function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),mylist=_useState2[0],setMyList=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),loop=_useState4[0],setLoop=_useState4[1];var _useState5=useState(25),_useState6=_slicedToArray(_useState5,2),lower=_useState6[0],setLower=_useState6[1];var _useState7=useState(70),_useState8=_slicedToArray(_useState7,2),upper=_useState8[0],setUpper=_useState8[1];useEffect(function(){updateVals();},[]);// function sleep(milliseconds) {\n//   const date = Date.now();\n//   let currentDate = null;\n//   do {\n//     currentDate = Date.now();\n//   } while (currentDate - date < milliseconds);\n// }\nfunction genValues(){return _genValues.apply(this,arguments);}function _genValues(){_genValues=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var i,generateValues;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:i=0;case 1:if(!(i<loop)){_context2.next=8;break;}generateValues={deviceID:\"device\"+Math.floor(Math.random()*5)+2,value:Math.floor(Math.random()*upper)+lower};_context2.next=5;return API.graphql({query:mutations.createWindspeed,variables:{input:generateValues}});case 5:i++;_context2.next=1;break;case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _genValues.apply(this,arguments);}function generate(){genValues();toast.success(\"Generating \".concat(loop,\" values between \").concat(lower,\" and \").concat(upper),2000,function(){updateVals();});}var updateVals=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return API.graphql({query:queries.listWindspeeds,fetchPolicy:\"no-cache\"});case 2:result=_context.sent;setMyList(result.data.listWindspeeds.items);// console.log(result.data.listWindspeeds.items);\ncase 4:case\"end\":return _context.stop();}}},_callee);}));return function updateVals(){return _ref.apply(this,arguments);};}();var refresh=function refresh(){updateVals();};var generateKeyValePairs=function generateKeyValePairs(arraytoupdated){mylist.map(function(item,index){var objNeeded={name:'init',value:-1};objNeeded['name']=index+1;objNeeded['value']=item.value;arraytoupdated.push(objNeeded);});};// generateKeyValePairs();\nfunction CustomizedLabel(props){var x=props.x,y=props.y,stroke=props.stroke,value=props.value;if(value>55||value<30){return/*#__PURE__*/React.createElement(\"text\",{x:x,y:y,dy:-4,fill:\"red\",fontSize:10,textAnchor:\"middle\"},value);}else{return/*#__PURE__*/React.createElement(\"text\",{x:x,y:y,dy:-4,fill:\"green\",fontSize:10,textAnchor:\"middle\"},value);}}var myChartArray=[];generateKeyValePairs(myChartArray);function CreateLineChart(val){return/*#__PURE__*/React.createElement(ResponsiveContainer,{width:\"100%\",minHeight:400},/*#__PURE__*/React.createElement(LineChart,{data:val.data,margin:{top:20,right:20,left:20,bottom:10}},/*#__PURE__*/React.createElement(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/React.createElement(XAxis,{tick:false}),/*#__PURE__*/React.createElement(YAxis,null),/*#__PURE__*/React.createElement(Tooltip,null),/*#__PURE__*/React.createElement(Line,{type:\"monotone\",dataKey:\"value\",stroke:\"#8884d8\",strokeWidth:2,label:/*#__PURE__*/React.createElement(CustomizedLabel,null)})));}var schema=yup.object().shape({numberofvals:yup.number().positive().integer().required(),lowerLimit:yup.number().positive().integer().required(),upperLimit:yup.number().positive().integer().required()});var _useForm=useForm({resolver:yupResolver(schema)}),handleSubmit=_useForm.handleSubmit,register=_useForm.register,errors=_useForm.errors;var onSubmit=function onSubmit(data){console.log('data->',data);setLoop(data.numberofvals);setLower(data.lowerLimit);setUpper(data.upperLimit);// console.log('min->',lower);\n// console.log('max->',upper);\n};return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"header\",{className:\"App-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"App-form\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"label\",null,\"#\"),/*#__PURE__*/React.createElement(\"input\",{name:\"numberofvals\",defaultValue:loop,type:\"number\",min:\"1\",max:\"99\",ref:register({min:10,max:99}),onChange:function onChange(e){return setLoop(e.target.value);}}),/*#__PURE__*/React.createElement(\"label\",null,\"Min\"),/*#__PURE__*/React.createElement(\"input\",{name:\"lowerLimit\",defaultValue:lower,type:\"number\",min:\"1\",max:\"99\",ref:register({min:10,max:99}),onChange:function onChange(e){return setLower(e.target.value);}}),/*#__PURE__*/React.createElement(\"label\",null,\"Max\"),/*#__PURE__*/React.createElement(\"input\",{name:\"upperLimit\",defaultValue:upper,type:\"number\",min:\"1\",max:\"99\",ref:register({min:10,max:99}),onChange:function onChange(e){return setUpper(e.target.value);}}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave})),/*#__PURE__*/React.createElement(\"button\",{onClick:refresh},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSync,onClick:refresh})))),/*#__PURE__*/React.createElement(\"div\",{className:\"App-buttons\"},/*#__PURE__*/React.createElement(\"button\",{onClick:generate},\"Generate data\"),/*#__PURE__*/React.createElement(\"a\",{href:\"https://us-west-2.console.aws.amazon.com/dynamodb/home?region=us-west-2#tables:\",target:\"_blank\",rel:\"noopener noreferrer\"},/*#__PURE__*/React.createElement(\"img\",{src:ddblogo,alt:\"Logo\"}))),/*#__PURE__*/React.createElement(CreateLineChart,{data:myChartArray}),/*#__PURE__*/React.createElement(\"div\",{className:\"App-info\"},/*#__PURE__*/React.createElement(\"p\",null,\"Every wind turbine has a range of wind speeds, typically around 30 to 55 mph. Speed other than this range is detected anomalous.\",\" \",/*#__PURE__*/React.createElement(\"a\",{href:\"https://www.wind-watch.org/faq-output.php\",target:\"_blank\",rel:\"noopener noreferrer\"},\"source\")))));}export default withAuthenticator(App);","map":{"version":3,"sources":["/Users/goesamee/Documents/Work/GSI/External Content/DynamoDB_Streaming_Blog/BlogTemplate/ddb-streaming-ui/src/App.js"],"names":["React","useEffect","useState","useForm","FontAwesomeIcon","faSync","faSave","Amplify","API","withAuthenticator","AmplifySignOut","awsconfig","mutations","queries","ddblogo","toast","yupResolver","yup","ResponsiveContainer","Tooltip","XAxis","YAxis","CartesianGrid","LineChart","Line","configure","App","mylist","setMyList","loop","setLoop","lower","setLower","upper","setUpper","updateVals","genValues","i","generateValues","deviceID","Math","floor","random","value","graphql","query","createWindspeed","variables","input","generate","success","listWindspeeds","fetchPolicy","result","data","items","refresh","generateKeyValePairs","arraytoupdated","map","item","index","objNeeded","name","push","CustomizedLabel","props","x","y","stroke","myChartArray","CreateLineChart","val","top","right","left","bottom","schema","object","shape","numberofvals","number","positive","integer","required","lowerLimit","upperLimit","resolver","handleSubmit","register","errors","onSubmit","console","log","min","max","e","target"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { useForm } from \"react-hook-form\";\nimport './App.css';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faSync, faSave } from \"@fortawesome/free-solid-svg-icons\";\nimport Amplify, {API} from 'aws-amplify';\nimport { withAuthenticator, AmplifySignOut } from '@aws-amplify/ui-react';\nimport awsconfig from './aws-exports';\nimport * as mutations from './graphql/mutations';\nimport * as queries from './graphql/queries';\nimport ddblogo from './images/Amazon-DynamoDB_lgt.png'\nimport toast from \"light-toast\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from \"yup\";\nimport {\n  ResponsiveContainer, Tooltip, XAxis, YAxis, CartesianGrid, LineChart, Line,\n} from 'recharts';\nAmplify.configure(awsconfig);\n\nfunction App() {\n  const [mylist, setMyList] = useState([]);\n  const [loop, setLoop] = useState(10);\n  const [lower, setLower] = useState(25);\n  const [upper, setUpper] = useState(70);\n\n  useEffect(() => {\n    updateVals();\n  }, []);\n\n\n  // function sleep(milliseconds) {\n  //   const date = Date.now();\n  //   let currentDate = null;\n  //   do {\n  //     currentDate = Date.now();\n  //   } while (currentDate - date < milliseconds);\n  // }\n\n  async function genValues () {\n    for (let i = 0; i < loop; i++) {\n    const generateValues = { \n      deviceID: \"device\" + Math.floor(Math.random() * 5) + 2,\n      value: Math.floor(Math.random() * upper) + lower\n    };\n    await API.graphql({ query: mutations.createWindspeed, variables: { input: generateValues}});\n    // updateVals();\n    // sleep(3000);\n    }\n  }\n\n  function generate () {\n    genValues();\n    toast.success(`Generating ${loop} values between ${lower} and ${upper}`, 2000, () => {\n        updateVals();\n    }); \n  }\n\n  const updateVals = async() =>{\n    const result = await API.graphql({\n      query: queries.listWindspeeds,\n      fetchPolicy: \"no-cache\",\n    });\n    setMyList(result.data.listWindspeeds.items);\n    // console.log(result.data.listWindspeeds.items);\n  };\n\n  const refresh = () => {\n    updateVals();\n  }\n  \n  const generateKeyValePairs = (arraytoupdated) => {\n    mylist.map((item, index) => {\n    var objNeeded = { name: 'init', value: -1};\n    objNeeded['name'] = index+1;\n    objNeeded['value'] = item.value;\n    arraytoupdated.push(objNeeded);\n    });\n  }\n\n  // generateKeyValePairs();\n\n  function CustomizedLabel(props) {\n    const { x, y, stroke, value } = props;\n    if (value > 55 || value < 30) {\n    return (\n      <text x={x} y={y} dy={-4} fill=\"red\" fontSize={10} textAnchor=\"middle\">\n        {value}\n      </text>\n    );\n    }else{\n      return (\n        <text x={x} y={y} dy={-4} fill=\"green\" fontSize={10} textAnchor=\"middle\" >\n          {value}\n        </text>\n      );\n    }\n  }\n  const myChartArray = [];\n  generateKeyValePairs(myChartArray);\n\n  function CreateLineChart(val){\n    return(\n      <ResponsiveContainer width=\"100%\" minHeight={400}>\n        <LineChart\n          data={val.data}\n          margin={{\n            top: 20, right: 20, left: 20, bottom: 10,\n          }}\n          >\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis tick={false}/>\n          <YAxis />\n          <Tooltip />\n          <Line type=\"monotone\" dataKey=\"value\" stroke=\"#8884d8\" strokeWidth={2} label={<CustomizedLabel />} />\n        </LineChart>\n      </ResponsiveContainer>\n      )\n  }\n\n  \n  const schema = yup.object().shape({\n    numberofvals: yup.number().positive().integer().required(),\n    lowerLimit: yup.number().positive().integer().required(),\n    upperLimit: yup.number().positive().integer().required(),\n  });\n\n  const { handleSubmit, register, errors } = useForm({resolver: yupResolver(schema)});\n  const onSubmit = data => {\n    console.log('data->',data);\n    setLoop(data.numberofvals);\n    setLower(data.lowerLimit);\n    setUpper(data.upperLimit);\n    // console.log('min->',lower);\n    // console.log('max->',upper);\n  }\n\n  return (\n    <div className=\"App\">\n      {/* <AmplifySignOut /> */}\n      <header className=\"App-header\">\n      <div className=\"App-form\">\n        <form onSubmit={handleSubmit(onSubmit)}>\n          \n          <label>#</label>\n          <input name=\"numberofvals\" defaultValue={loop} type=\"number\" min =\"1\" max=\"99\"\n          ref={register({ min: 10, max: 99 })} \n          onChange={e => setLoop(e.target.value)}\n          />\n\n          <label>Min</label>\n          <input name=\"lowerLimit\" defaultValue={lower} type=\"number\" min =\"1\" max=\"99\"\n          ref={register({ min: 10, max: 99 })} \n          onChange={e => setLower(e.target.value)}\n          />\n\n          <label>Max</label>\n          <input name=\"upperLimit\" defaultValue={upper} type=\"number\" min =\"1\" max=\"99\"\n          ref={register({ min: 10, max: 99 })} \n          onChange={e => setUpper(e.target.value)}\n          />            \n          <button type=\"submit\"><FontAwesomeIcon icon={faSave} /></button>\n\n          <button onClick={refresh}>\n            <FontAwesomeIcon icon={faSync} onClick={refresh}/>\n          </button>\n          </form>\n        </div>\n\n        <div className=\"App-buttons\">\n          <button onClick={generate}>\n            Generate data\n          </button>\n        \n        <a href=\"https://us-west-2.console.aws.amazon.com/dynamodb/home?region=us-west-2#tables:\" target=\"_blank\" rel=\"noopener noreferrer\">\n          <img src={ddblogo} alt=\"Logo\" />\n        </a> \n        </div>\n        <CreateLineChart data={myChartArray} />\n        <div className=\"App-info\">\n        <p>Every wind turbine has a range of wind speeds, typically around 30 to 55 mph. Speed other than this range is detected anomalous.{\" \"}\n        <a href=\"https://www.wind-watch.org/faq-output.php\" target=\"_blank\" rel=\"noopener noreferrer\">\n        source\n        </a>\n        </p>\n        </div>\n      </header>\n    </div>\n  );\n}\n\nexport default withAuthenticator(App);\n"]},"metadata":{},"sourceType":"module"}