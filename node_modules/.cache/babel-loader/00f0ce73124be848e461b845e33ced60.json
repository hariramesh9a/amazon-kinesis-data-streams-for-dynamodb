{"ast":null,"code":"import _regeneratorRuntime from\"/Users/goesamee/Documents/Work/GSI/External Content/DynamoDB_Streaming_Blog/BlogTemplate/ddb-streaming-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/goesamee/Documents/Work/GSI/External Content/DynamoDB_Streaming_Blog/BlogTemplate/ddb-streaming-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/goesamee/Documents/Work/GSI/External Content/DynamoDB_Streaming_Blog/BlogTemplate/ddb-streaming-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import'./App.css';// import { FiRefreshCcw } from 'react-icons/fi';\nimport{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{library}from\"@fortawesome/fontawesome-svg-core\";import{faSync}from\"@fortawesome/free-solid-svg-icons\";import Amplify,{API}from'aws-amplify';import{withAuthenticator,AmplifySignOut}from'@aws-amplify/ui-react';import awsconfig from'./aws-exports';import*as mutations from'./graphql/mutations';import*as queries from'./graphql/queries';import ddblogo from'./images/Amazon-DynamoDB_lgt.png';import toast from\"light-toast\";import{ResponsiveContainer,Cell,Legend,Tooltip,Label,text,BarChart,Bar,XAxis,YAxis,CartesianGrid,LineChart,Line}from'recharts';Amplify.configure(awsconfig);// library.add(fas)\nfunction App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),mylist=_useState2[0],setMyList=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),loop=_useState4[0],setLoop=_useState4[1];useEffect(function(){updateVals();},[]);var updateVals=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return API.graphql({query:queries.listWindspeeds,fetchPolicy:\"no-cache\"});case 2:result=_context.sent;setMyList(result.data.listWindspeeds.items);// console.log(result.data.listWindspeeds.items);\ncase 4:case\"end\":return _context.stop();}}},_callee);}));return function updateVals(){return _ref.apply(this,arguments);};}();function sleep(milliseconds){var date=Date.now();var currentDate=null;do{currentDate=Date.now();}while(currentDate-date<milliseconds);}function genValues(){return _genValues.apply(this,arguments);}function _genValues(){_genValues=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var i,generateValues;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:i=0;case 1:if(!(i<loop)){_context2.next=8;break;}generateValues={value:Math.floor(Math.random()*35)+25};_context2.next=5;return API.graphql({query:mutations.createWindspeed,variables:{input:generateValues}});case 5:i++;_context2.next=1;break;case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _genValues.apply(this,arguments);}function generate(){genValues();toast.success('Generating values...',5000,function(){// alert(\"Generated 10 values\")\nupdateVals();});}var refresh=function refresh(){// alert(\"refreshing\");\ntoast.success('Updating chart...');updateVals();};var generateKeyValePairs=function generateKeyValePairs(arraytoupdated){mylist.map(function(item,index){var objNeeded={name:'init',value:-1};objNeeded['name']=index+1;objNeeded['value']=item.value;arraytoupdated.push(objNeeded);});};// generateKeyValePairs();\nfunction CustomizedLabel(props){var x=props.x,y=props.y,stroke=props.stroke,value=props.value;if(value>50||value<30){return/*#__PURE__*/React.createElement(\"text\",{x:x,y:y,dy:-4,fill:\"red\",fontSize:10,textAnchor:\"middle\"},value);}else{return/*#__PURE__*/React.createElement(\"text\",{x:x,y:y,dy:-4,fill:\"green\",fontSize:10,textAnchor:\"middle\"},value);}}var myChartArray=[];generateKeyValePairs(myChartArray);function CreateLineChart(val){// console.log(\"unsort->\",val.data);\nreturn/*#__PURE__*/React.createElement(ResponsiveContainer,{width:\"100%\",minHeight:400},/*#__PURE__*/React.createElement(LineChart,{data:val.data,margin:{top:20,right:20,left:20,bottom:10}},/*#__PURE__*/React.createElement(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/React.createElement(XAxis,{tick:false}),/*#__PURE__*/React.createElement(YAxis,null),/*#__PURE__*/React.createElement(Tooltip,null),/*#__PURE__*/React.createElement(Line,{type:\"monotone\",dataKey:\"value\",stroke:\"#8884d8\",strokeWidth:2,label:/*#__PURE__*/React.createElement(CustomizedLabel,null)})));}return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(AmplifySignOut,null),/*#__PURE__*/React.createElement(\"header\",{className:\"App-header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Wind Turbine\"),/*#__PURE__*/React.createElement(\"div\",{className:\"App-buttons\"},/*#__PURE__*/React.createElement(\"button\",{onClick:generate},\"Generate data\"),/*#__PURE__*/React.createElement(\"button\",{onClick:refresh},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSync})),/*#__PURE__*/React.createElement(\"a\",{href:\"https://us-west-2.console.aws.amazon.com/dynamodb/home?region=us-west-2#\",target:\"_blank\",rel:\"noopener noreferrer\"},/*#__PURE__*/React.createElement(\"img\",{src:ddblogo,alt:\"Logo\"}))),/*#__PURE__*/React.createElement(CreateLineChart,{data:myChartArray}),/*#__PURE__*/React.createElement(\"div\",{className:\"App-info\"},/*#__PURE__*/React.createElement(\"p\",null,\"How much energy do wind turbines produce?\",/*#__PURE__*/React.createElement(\"br\",null),\"Every wind turbine has a range of wind speeds, typically around 30 to 55 mph. \",\" \",/*#__PURE__*/React.createElement(\"a\",{href:\"https://www.wind-watch.org/faq-output.php\",target:\"_blank\",rel:\"noopener noreferrer\"},\"source\")))));}export default withAuthenticator(App);","map":{"version":3,"sources":["/Users/goesamee/Documents/Work/GSI/External Content/DynamoDB_Streaming_Blog/BlogTemplate/ddb-streaming-ui/src/App.js"],"names":["React","useEffect","useState","FontAwesomeIcon","library","faSync","Amplify","API","withAuthenticator","AmplifySignOut","awsconfig","mutations","queries","ddblogo","toast","ResponsiveContainer","Cell","Legend","Tooltip","Label","text","BarChart","Bar","XAxis","YAxis","CartesianGrid","LineChart","Line","configure","App","mylist","setMyList","loop","setLoop","updateVals","graphql","query","listWindspeeds","fetchPolicy","result","data","items","sleep","milliseconds","date","Date","now","currentDate","genValues","i","generateValues","value","Math","floor","random","createWindspeed","variables","input","generate","success","refresh","generateKeyValePairs","arraytoupdated","map","item","index","objNeeded","name","push","CustomizedLabel","props","x","y","stroke","myChartArray","CreateLineChart","val","top","right","left","bottom"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport './App.css';\n// import { FiRefreshCcw } from 'react-icons/fi';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faSync } from \"@fortawesome/free-solid-svg-icons\";\nimport Amplify, {API} from 'aws-amplify';\nimport { withAuthenticator, AmplifySignOut } from '@aws-amplify/ui-react';\nimport awsconfig from './aws-exports';\nimport * as mutations from './graphql/mutations';\nimport * as queries from './graphql/queries';\nimport ddblogo from './images/Amazon-DynamoDB_lgt.png'\nimport toast from \"light-toast\"\nimport {\n  ResponsiveContainer, Cell, Legend, Tooltip, Label, text,BarChart, Bar, XAxis, YAxis, CartesianGrid, LineChart, Line,\n} from 'recharts';\nAmplify.configure(awsconfig);\n// library.add(fas)\n\nfunction App() {\n  const [mylist, setMyList] = useState([]);\n  const [loop, setLoop] = useState(10);\n\n  useEffect(() => {\n    updateVals();\n  }, []);\n\n  const updateVals = async() =>{\n      const result = await API.graphql({\n        query: queries.listWindspeeds,\n        fetchPolicy: \"no-cache\",\n      });\n      setMyList(result.data.listWindspeeds.items);\n      // console.log(result.data.listWindspeeds.items);\n    };\n\n  function sleep(milliseconds) {\n    const date = Date.now();\n    let currentDate = null;\n    do {\n      currentDate = Date.now();\n    } while (currentDate - date < milliseconds);\n  }\n\n  async function genValues () {\n    // alert(\"Data generator started\");\n    for (let i = 0; i < loop; i++) {\n    const generateValues = { value: Math.floor(Math.random() * 35) + 25};\n    await API.graphql({ query: mutations.createWindspeed, variables: { input: generateValues}});\n    // updateVals();\n    // sleep(3000);\n    }\n  }\n\n  function generate () {\n    genValues();\n    toast.success('Generating values...', 5000, () => {\n        // alert(\"Generated 10 values\")\n        updateVals();\n    }); \n  }\n\n  const refresh = () => {\n    // alert(\"refreshing\");\n    toast.success('Updating chart...');\n    updateVals();\n  }\n  \n  const generateKeyValePairs = (arraytoupdated) => {\n    mylist.map((item, index) => {\n    var objNeeded = { name: 'init', value: -1};\n    objNeeded['name'] = index+1;\n    objNeeded['value'] = item.value;\n    arraytoupdated.push(objNeeded);\n    });\n  }\n\n  // generateKeyValePairs();\n\n  function CustomizedLabel(props) {\n    const { x, y, stroke, value } = props;\n    if (value > 50 || value < 30) {\n    return (\n      <text x={x} y={y} dy={-4} fill=\"red\" fontSize={10} textAnchor=\"middle\">\n        {value}\n      </text>\n    );\n    }else{\n      return (\n        <text x={x} y={y} dy={-4} fill=\"green\" fontSize={10} textAnchor=\"middle\" >\n          {value}\n        </text>\n      );\n    }\n  }\n  const myChartArray = [];\n  generateKeyValePairs(myChartArray);\n\n  function CreateLineChart(val){\n    // console.log(\"unsort->\",val.data);\n    return(\n      <ResponsiveContainer width=\"100%\" minHeight={400}>\n        <LineChart\n          data={val.data}\n          margin={{\n            top: 20, right: 20, left: 20, bottom: 10,\n          }}\n          >\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis tick={false}/>\n          <YAxis />\n          <Tooltip />\n          <Line type=\"monotone\" dataKey=\"value\" stroke=\"#8884d8\" strokeWidth={2} label={<CustomizedLabel />} />\n        </LineChart>\n      </ResponsiveContainer>\n      )\n  }\n\n\n  return (\n    <div className=\"App\">\n      <AmplifySignOut />\n      <header className=\"App-header\">\n\n        <h1>Wind Turbine</h1>\n        <div className=\"App-buttons\">\n        <button onClick={generate}>Generate data</button>\n        <button onClick={refresh}>\n        <FontAwesomeIcon icon={faSync} />\n        </button>\n        \n        <a href=\"https://us-west-2.console.aws.amazon.com/dynamodb/home?region=us-west-2#\" target=\"_blank\" rel=\"noopener noreferrer\">\n          <img src={ddblogo} alt=\"Logo\" />\n        </a> \n        </div>\n        <CreateLineChart data={myChartArray} />\n        <div className=\"App-info\">\n        <p>How much energy do wind turbines produce?\n        <br/>Every wind turbine has a range of wind speeds, typically around 30 to 55 mph. {\" \"}\n        <a href=\"https://www.wind-watch.org/faq-output.php\" target=\"_blank\" rel=\"noopener noreferrer\">\n        source\n        </a>\n        </p>\n        </div>\n      </header>\n    </div>\n  );\n}\n\nexport default withAuthenticator(App);\n"]},"metadata":{},"sourceType":"module"}